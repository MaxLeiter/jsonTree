class jsonTree{constructor(e,t,s){if("object"==typeof e)this.generateTree(t,e),this.classify(t,s);else{const r=new XMLHttpRequest;r.open("GET",e,!0),r.send(),r.addEventListener("load",()=>{this.generateTree(t,JSON.parse(r.responseText)),this.classify(t,s)})}}generateTree(e,t){const s=document.querySelector(e);s.classList.add("jsonTree"),s.innerHTML=this.json2html(t);const r=document.querySelector('[data-id="top"]');r.addEventListener("click",e=>{e.preventDefault(),e.target&&"LI"===e.target.nodeName.toUpperCase()&&Array.from(e.target.childNodes).length>1&&this.toggleClass(e.target,"selected")})}classify(e,t){this.applyClasses(e,"li","ul",t),this.applyClasses(e,"ul","li",t)}applyClasses(e,t,s,r){const a=Array.from(document.querySelectorAll(`${e} ${t}`));a.forEach(function(e){const t=Array.from(e.children).filter(e=>e.tagName.toLowerCase()===s.toLowerCase().toString());if(t.length>0?(e.classList.add("parent"),e.style.cursor="pointer"):e.style.cursor="auto",r){const t=r(e);e.classList.add("depth-"+t)}})}depth(e){return e.parentNode&&"top"===e.parentNode.getAttribute("data-id")?null==e?0:1+depth(e.parentNode):0}json2html(e){let t,s="";e=this.htmlEscape(JSON.stringify(e)),e=JSON.parse(e),s+='<ul data-id="top">';for(t in e)s+="<li>"+t+": ","object"==typeof e[t]?s+=this.json2html(e[t]):s+=e[t],s+="</li>";return s+="</ul>"}htmlEscape(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;"};return e.replace(/[&<>]/g,function(e){return t[e]||e})}toggleClass(e,t){e&&e.classList.toggle(t)}}